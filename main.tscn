[gd_scene load_steps=13 format=3 uid="uid://clfhkbmknyewx"]

[ext_resource type="PackedScene" uid="uid://c374f2n2m818j" path="res://player/player.tscn" id="1_keog1"]
[ext_resource type="PackedScene" uid="uid://dfpp2mxpjle8h" path="res://companion/companion.tscn" id="2_tqyfj"]
[ext_resource type="PackedScene" uid="uid://deeryhksmvs2m" path="res://enemy/enemy.tscn" id="3_nb1ho"]
[ext_resource type="PackedScene" uid="uid://dbls8kubhonhs" path="res://environment/wooden_door.tscn" id="4_7a4ua"]
[ext_resource type="PackedScene" uid="uid://o2rq36t0y4ra" path="res://environment/tmp_flare.tscn" id="4_ho241"]

[sub_resource type="Environment" id="Environment_04lgc"]
background_mode = 2
tonemap_mode = 3
sdfgi_enabled = true
sdfgi_read_sky_light = false
glow_enabled = true
glow_normalized = true
glow_blend_mode = 0
fog_light_color = Color(0.223529, 0.219608, 0.203922, 1)
fog_light_energy = 0.02
fog_density = 0.1
volumetric_fog_enabled = true
volumetric_fog_density = 0.125
volumetric_fog_emission = Color(0.00784314, 0.00784314, 0.00784314, 1)

[sub_resource type="NavigationMesh" id="NavigationMesh_2cdwm"]
vertices = PackedVector3Array(3.49822, 0.5, -10.5, 3.49822, 0.5, -12, -4.25178, 0.5, -12, -5.25178, 0.5, -10.5, -12.0018, 0.5, -5.75, -12.0018, 0.5, 0.5, -5.50178, 0.5, 0.5, -5.25178, 0.5, -10.5, -5.25178, 0.5, -10.5, -4.25178, 0.5, -12, -12.0018, 0.5, -12, -12.0018, 0.5, -5.75, 3.49822, 0.5, -12, 3.49822, 0.5, -10.5, 5.74822, 0.5, -10.25, 11.9982, 0.5, -12, 6.49822, 0.5, 10.25, 6.49822, 0.5, 12, 11.9982, 0.5, 12, 5.74822, 0.5, -10.25, 5.49822, 0.5, -0.25, 11.9982, 0.5, 0, 11.9982, 0.5, -12, 5.49822, 0.5, -0.25, 5.49822, 0.5, 10, 6.49822, 0.5, 10.25, 6.49822, 0.5, 10.25, 11.9982, 0.5, 12, 11.9982, 0.5, 0, 5.49822, 0.5, -0.25, -4.50178, 5.5, 1.25, -13.5018, 5.5, 1.5, -4.25178, 5.5, 1.75, -4.75178, 5.5, 11, -13.5018, 5.5, 11.25, -4.00178, 5.5, 11.25, 4.24822, 5.5, 10.75, -4.75178, 5.5, 11, -4.00178, 5.5, 11.25, 5.49822, 5.5, 11.25, 4.49822, 5.5, 10.75, -4.50178, 5.5, -9.5, -4.25178, 5.5, -9, 3.99822, 5.5, -9.25, 4.74822, 5.5, -9.5, 3.99822, 5.5, -9.25, 4.24822, 5.5, 0.5, 4.49822, 5.5, 0.5, 4.74822, 5.5, -9.5, 4.24822, 5.5, 0.5, 4.24822, 5.5, 10.75, 4.49822, 5.5, 10.75, 4.49822, 5.5, 0.5, -4.50178, 5.5, 1.25, -4.25178, 5.5, 1.75, -4.25178, 5.5, -9, -4.50178, 5.5, -9.5, -3.25178, 0.5, 0.5, 3.24822, 0.5, 0.5, 3.24822, 0.5, -8.25, -3.25178, 0.5, -8.25, 3.24822, 0.5, 0.5, -3.25178, 0.5, 0.5, -3.25178, 0.5, 2.5, -3.25178, 0.5, 2.5, -5.00178, 0.5, 2.75, -4.75178, 0.5, 10, -3.25178, 0.5, 2.5, -4.75178, 0.5, 10, 3.24822, 0.5, 10, 3.24822, 0.5, 0.5, -5.00178, 0.5, 2.75, -12.0018, 0.5, 2.75, -12.0018, 0.5, 10, -4.75178, 0.5, 10)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(18, 17, 16), PackedInt32Array(20, 19, 21), PackedInt32Array(21, 19, 22), PackedInt32Array(25, 24, 23), PackedInt32Array(29, 28, 26), PackedInt32Array(26, 28, 27), PackedInt32Array(32, 31, 30), PackedInt32Array(35, 34, 33), PackedInt32Array(40, 39, 36), PackedInt32Array(36, 39, 38), PackedInt32Array(36, 38, 37), PackedInt32Array(42, 41, 43), PackedInt32Array(43, 41, 44), PackedInt32Array(46, 45, 47), PackedInt32Array(47, 45, 48), PackedInt32Array(52, 51, 49), PackedInt32Array(49, 51, 50), PackedInt32Array(56, 55, 53), PackedInt32Array(53, 55, 54), PackedInt32Array(60, 59, 57), PackedInt32Array(57, 59, 58), PackedInt32Array(63, 62, 61), PackedInt32Array(66, 65, 64), PackedInt32Array(68, 67, 69), PackedInt32Array(69, 67, 70), PackedInt32Array(72, 71, 73), PackedInt32Array(73, 71, 74)]

[sub_resource type="BoxMesh" id="BoxMesh_xs4j0"]
size = Vector3(10, 5, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tagg1"]
albedo_color = Color(0.572549, 0.572549, 0.572549, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_8r244"]
data = PackedVector3Array(-5, 2.5, 0.5, 5, 2.5, 0.5, -5, -2.5, 0.5, 5, 2.5, 0.5, 5, -2.5, 0.5, -5, -2.5, 0.5, 5, 2.5, -0.5, -5, 2.5, -0.5, 5, -2.5, -0.5, -5, 2.5, -0.5, -5, -2.5, -0.5, 5, -2.5, -0.5, 5, 2.5, 0.5, 5, 2.5, -0.5, 5, -2.5, 0.5, 5, 2.5, -0.5, 5, -2.5, -0.5, 5, -2.5, 0.5, -5, 2.5, -0.5, -5, 2.5, 0.5, -5, -2.5, -0.5, -5, 2.5, 0.5, -5, -2.5, 0.5, -5, -2.5, -0.5, 5, 2.5, 0.5, -5, 2.5, 0.5, 5, 2.5, -0.5, -5, 2.5, 0.5, -5, 2.5, -0.5, 5, 2.5, -0.5, -5, -2.5, 0.5, 5, -2.5, 0.5, -5, -2.5, -0.5, 5, -2.5, 0.5, 5, -2.5, -0.5, -5, -2.5, -0.5)

[sub_resource type="PlaneMesh" id="PlaneMesh_j6r23"]
size = Vector2(25, 25)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_y8kr8"]
data = PackedVector3Array(12.5, 0, 12.5, -12.5, 0, 12.5, 12.5, 0, -12.5, -12.5, 0, 12.5, -12.5, 0, -12.5, 12.5, 0, -12.5)

[node name="World" type="Node"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_04lgc")

[node name="Player" parent="." node_paths=PackedStringArray("companion") instance=ExtResource("1_keog1")]
transform = Transform3D(0.886204, 0, -0.463296, 0, 1, 0, 0.463296, 0, 0.886204, -2.20962, 0, 0.78639)
companion = NodePath("../Companion")

[node name="Companion" parent="." instance=ExtResource("2_tqyfj")]
transform = Transform3D(0.886204, 0, -0.463296, 0, 1, 0, 0.463296, 0, 0.886204, -2.82897, 2.09821, 0.458817)
circle_radius = 0.5
circle_speed = 350.0
bounce_height = 0.001
bounce_speed = 0.5

[node name="Enemy" parent="." node_paths=PackedStringArray("follow_target") instance=ExtResource("3_nb1ho")]
transform = Transform3D(-0.937233, 0, 0.348703, 0, 1, 0, -0.348703, 0, -0.937233, 1.29657, 0, -3.12219)
follow_target = NodePath("../Player")

[node name="Enemy_NavMesh" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_2cdwm")

[node name="Wall" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.92293, 2.5, -8.67624)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall10" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.97575, 2.5, -8.67624)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall10"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall10/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall2" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -4.47988, 2.5, -3.9377)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall2/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall3" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 4.47751, 2.5, -3.9377)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall3/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall4" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 4.47751, 2.5, 6.05076)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall4/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall5" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.99224, 2.5, 1.52254)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall5"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall5/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall6" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.9908, 2.5, 11.0128)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall6"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall6/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall7" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.868774, 2.5, 11.0128)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall7"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall7/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall8" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(0.898633, 0.438701, -1.91762e-08, 1.13e-15, -4.37114e-08, -1, -0.438701, 0.898633, -3.92805e-08, -8.64098, 6.89566, -4.92497)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall8"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall8/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Wall9" type="MeshInstance3D" parent="Enemy_NavMesh"]
transform = Transform3D(1, 0, 0, 0, 1, -5.96046e-08, 0, 5.96046e-08, 1, -0.475568, 7.42223, -8.66618)
mesh = SubResource("BoxMesh_xs4j0")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_tagg1")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Wall9"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Wall9/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8r244")

[node name="Ground" type="MeshInstance3D" parent="Enemy_NavMesh"]
mesh = SubResource("PlaneMesh_j6r23")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="Enemy_NavMesh/Ground"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemy_NavMesh/Ground/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_y8kr8")

[node name="tmp" type="Camera3D" parent="."]
transform = Transform3D(0.941247, -0.0219585, -0.337005, 0.0285357, 0.999487, 0.0145752, 0.336512, -0.0233355, 0.94139, -2.16161, 1.34773, 2.6753)

[node name="Tmp_Flare2" parent="." instance=ExtResource("4_ho241")]
transform = Transform3D(0.976717, 0.214531, 0, -0.214531, 0.976717, 0, 0, 0, 1, -3.8996, 2.14562, -5.616)

[node name="Tmp_Flare3" parent="." instance=ExtResource("4_ho241")]
transform = Transform3D(0.982146, -0.188118, 0, 0.188118, 0.982146, 0, 0, 0, 1, 3.88417, 2.14562, 0.521938)

[node name="Tmp_Flare4" parent="." instance=ExtResource("4_ho241")]
transform = Transform3D(1, 0, 0, 0, 0.981467, 0.191631, 0, -0.191631, 0.981467, -3.57238, 2.14562, 10.4596)

[node name="Tmp_Flare" parent="." instance=ExtResource("4_ho241")]
transform = Transform3D(1, 0, 0, 0, 0.969338, -0.24573, 0, 0.24573, 0.969338, -11.5991, 2.14562, 2.14751)

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(-0.75685, 0.492184, -0.430037, 0.112185, 0.746027, 0.656398, 0.643888, 0.448551, -0.619846, -0.338601, 4.40782, -8.54144)
light_color = Color(0.988235, 1, 0.917647, 1)
light_energy = 3.5
light_volumetric_fog_energy = 8.0
light_specular = 8.0
shadow_enabled = true
spot_range = 6.529
spot_angle = 18.78

[node name="WoodenDoor" parent="." instance=ExtResource("4_7a4ua")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -8.40144)
