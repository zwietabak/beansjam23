[gd_scene load_steps=29 format=3 uid="uid://dgyo2xln80eos"]

[ext_resource type="PackedScene" uid="uid://o6vd4hyfmv0w" path="res://meshes/enemy/Enemy.glb" id="1_jmqyb"]
[ext_resource type="Script" path="res://enemy/enemy_mesh.gd" id="2_f3pni"]
[ext_resource type="Animation" uid="uid://cgcj1eglv3klk" path="res://meshes/animations/Death.res" id="2_wrjux"]
[ext_resource type="ArrayMesh" uid="uid://d1kno6x3vvekh" path="res://meshes/enemy/Horn.obj" id="3_uikw6"]
[ext_resource type="Animation" uid="uid://bvxocms0jjl8k" path="res://meshes/animations/EnemyAttack.res" id="3_w084d"]
[ext_resource type="Script" path="res://meshes/character/CharacterAnimationTree.gd" id="4_4prx6"]
[ext_resource type="Animation" uid="uid://d21ds4ilrvyle" path="res://meshes/animations/EnemyAttack_Flipped.res" id="4_lmydp"]
[ext_resource type="Animation" uid="uid://8wfketrva012" path="res://meshes/animations/EnemyHit.res" id="5_aycch"]
[ext_resource type="Animation" uid="uid://cqmcxjev5nx1v" path="res://meshes/animations/Idle.res" id="6_bebth"]
[ext_resource type="Animation" uid="uid://611pfjlelpcg" path="res://meshes/animations/Running.res" id="7_b4vh4"]
[ext_resource type="Animation" uid="uid://cvgl5e13hn1qh" path="res://meshes/animations/EnemyWalking.res" id="11_xmrlm"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a875n"]
animation = &"Enemy/Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0im4p"]
animation = &"Enemy/EnemyWalking"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_e3ctt"]
animation = &"Enemy/EnemyAttack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ioanm"]
animation = &"Enemy/EnemyAttack_Flipped"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_k53fy"]
animation = &"Enemy/EnemyHit"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_fkjkw"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_xlj2q"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_ins5e"]
fadein_time = 0.2
fadeout_time = 0.2

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_6wy67"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_j22gr"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_d8cgj"]
graph_offset = Vector2(-364.698, 141.493)
nodes/Animation/node = SubResource("AnimationNodeAnimation_k53fy")
nodes/Animation/position = Vector2(40, 340)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_a875n")
"nodes/Animation 2/position" = Vector2(-280, 100)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_0im4p")
"nodes/Animation 3/position" = Vector2(-280, 240)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_e3ctt")
"nodes/Animation 4/position" = Vector2(140, 540)
"nodes/Animation 5/node" = SubResource("AnimationNodeAnimation_ioanm")
"nodes/Animation 5/position" = Vector2(380, 680)
nodes/Attack/node = SubResource("AnimationNodeOneShot_fkjkw")
nodes/Attack/position = Vector2(580, 340)
nodes/Attack2/node = SubResource("AnimationNodeOneShot_xlj2q")
nodes/Attack2/position = Vector2(840, 500)
nodes/GetHit/node = SubResource("AnimationNodeOneShot_ins5e")
nodes/GetHit/position = Vector2(320, 240)
nodes/Running/node = SubResource("AnimationNodeBlend2_6wy67")
nodes/Running/position = Vector2(-40, 100)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_j22gr")
nodes/TimeScale/position = Vector2(400, 500)
nodes/output/position = Vector2(1120, 420)
node_connections = [&"output", 0, &"Attack2", &"Attack", 0, &"GetHit", &"Attack", 1, &"TimeScale", &"Attack2", 0, &"Attack", &"Attack2", 1, &"Animation 5", &"GetHit", 0, &"Running", &"GetHit", 1, &"Animation", &"Running", 0, &"Animation 2", &"Running", 1, &"Animation 3", &"TimeScale", 0, &"Animation 4"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_m4kr6"]
animation = &"Enemy/Death"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_esq04"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5r1re"]
advance_mode = 2
advance_condition = &"IsDead"
advance_expression = "IsDead == true"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i3rj0"]
advance_mode = 2
advance_condition = &"IsDead"
advance_expression = "IsDead == false"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_3w3dv"]
states/BlendTree/node = SubResource("AnimationNodeBlendTree_d8cgj")
states/BlendTree/position = Vector2(480, 231)
states/Death/node = SubResource("AnimationNodeAnimation_m4kr6")
states/Death/position = Vector2(480, 378)
states/End/position = Vector2(903, 231)
states/Start/position = Vector2(258, 231)
transitions = ["Start", "BlendTree", SubResource("AnimationNodeStateMachineTransition_esq04"), "BlendTree", "Death", SubResource("AnimationNodeStateMachineTransition_5r1re"), "Death", "BlendTree", SubResource("AnimationNodeStateMachineTransition_i3rj0")]
graph_offset = Vector2(-177, 166)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ape8k"]
_data = {
"Death": ExtResource("2_wrjux"),
"EnemyAttack": ExtResource("3_w084d"),
"EnemyAttack_Flipped": ExtResource("4_lmydp"),
"EnemyHit": ExtResource("5_aycch"),
"EnemyWalking": ExtResource("11_xmrlm"),
"Idle": ExtResource("6_bebth"),
"Running": ExtResource("7_b4vh4")
}

[node name="Enemy_Mesh" node_paths=PackedStringArray("Body", "Horns") instance=ExtResource("1_jmqyb")]
script = ExtResource("2_f3pni")
Body = NodePath("Armature/Skeleton3D/EnemyBody")
Horns = [NodePath("Armature/Skeleton3D/BoneAttachment3D/Horn"), NodePath("Armature/Skeleton3D/BoneAttachment3D/Horn4"), NodePath("Armature/Skeleton3D/BoneAttachment3D/Horn3"), NodePath("Armature/Skeleton3D/BoneAttachment3D/Horn2"), NodePath("Armature/Skeleton3D/BoneAttachment3D/Horn5"), NodePath("Armature/Skeleton3D/BoneAttachment3D/Horn6"), NodePath("Armature/Skeleton3D/BoneAttachment3D2/Horn5"), NodePath("Armature/Skeleton3D/BoneAttachment3D4/Horn5"), NodePath("Armature/Skeleton3D/BoneAttachment3D3/Horn5"), NodePath("Armature/Skeleton3D/BoneAttachment3D5/Horn5")]

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(2.74166, -1.10156, -98.5416)
bones/0/rotation = Quaternion(-0.663556, 0.0745058, 0.00345183, 0.744399)
bones/1/rotation = Quaternion(-0.0201703, 0.0112446, -0.0148997, 0.999622)
bones/2/rotation = Quaternion(0.0863638, 0.0214155, -0.0207254, 0.995818)
bones/3/rotation = Quaternion(0.143857, 0.0188748, -0.0215841, 0.989183)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(0.00999562, -0.0327654, 0.0286125, 0.999003)
bones/5/rotation = Quaternion(-0.180107, -0.0888149, -0.0094344, 0.979584)
bones/6/rotation = Quaternion(0.502158, 0.506519, -0.578983, 0.395038)
bones/6/scale = Vector3(1, 1, 1)
bones/7/position = Vector3(5.04197e-06, 12.9223, 2.24648e-06)
bones/7/rotation = Quaternion(0.335488, 0.0674647, 0.258351, 0.903411)
bones/8/rotation = Quaternion(0.00151271, 0.0760081, 0.485025, 0.871189)
bones/9/rotation = Quaternion(0.0887292, -0.106458, 0.115308, 0.983615)
bones/10/rotation = Quaternion(0.291685, -0.0614568, 0.270222, 0.915491)
bones/11/rotation = Quaternion(-0.0862871, -0.0118292, -0.150306, 0.984796)
bones/12/position = Vector3(-1.06692e-05, 4.38211, -1.42987e-05)
bones/12/rotation = Quaternion(-0.0727778, -0.004175, -0.0801827, 0.994111)
bones/13/rotation = Quaternion(0.375647, -0.0233156, -0.0965276, 0.921427)
bones/14/rotation = Quaternion(0.207723, -0.000128602, -0.0202595, 0.977978)
bones/15/rotation = Quaternion(0.150604, -0.00113912, 0.00400715, 0.988585)
bones/16/rotation = Quaternion(0.37576, -0.0213776, -0.0917727, 0.921914)
bones/17/rotation = Quaternion(0.207726, -0.00116825, -0.0251529, 0.977863)
bones/18/position = Vector3(2.40065e-05, 2.94611, -3.04699e-06)
bones/18/rotation = Quaternion(0.104444, 2.99284e-05, -0.009596, 0.994485)
bones/19/position = Vector3(1.88252, 12.4013, -0.00998459)
bones/19/rotation = Quaternion(0.375815, -0.020411, -0.0894025, 0.922146)
bones/20/position = Vector3(-2.97327e-06, 3.24177, 1.86563e-06)
bones/20/rotation = Quaternion(0.207724, -0.00109908, -0.0248289, 0.977872)
bones/21/position = Vector3(4.35396e-06, 2.87924, -3.82475e-06)
bones/21/rotation = Quaternion(0.104442, -0.000275272, -0.0125019, 0.994452)
bones/22/position = Vector3(4.10527, 11.648, 0.226184)
bones/22/rotation = Quaternion(0.375516, -0.0252723, -0.101326, 0.920914)
bones/23/position = Vector3(1.44132e-06, 3.28085, 2.87369e-06)
bones/23/rotation = Quaternion(0.207725, 0.00153587, -0.0124192, 0.978107)
bones/24/rotation = Quaternion(0.104432, 0.00152151, 0.00460404, 0.99452)
bones/25/position = Vector3(-6.1057, 9.10637, 0.757074)
bones/25/rotation = Quaternion(0.542316, -0.471941, 0.587501, 0.371493)
bones/26/rotation = Quaternion(0.345148, -0.111335, 0.00458231, 0.93191)
bones/27/position = Vector3(-2.53991e-06, 27.4047, 1.45075e-06)
bones/27/rotation = Quaternion(0.0198895, -0.0688337, -0.582425, 0.809721)
bones/28/position = Vector3(1.14901e-05, 27.6145, -1.16105e-06)
bones/28/rotation = Quaternion(0.145799, 0.159177, -0.0128778, 0.97634)
bones/29/rotation = Quaternion(0.291687, 0.0614569, -0.270222, 0.91549)
bones/30/position = Vector3(1.00136e-05, 4.74494, -2.46735e-05)
bones/30/rotation = Quaternion(-0.0862867, 0.0118289, 0.150307, 0.984796)
bones/31/rotation = Quaternion(-0.0727787, 0.00417593, 0.0801826, 0.994111)
bones/32/rotation = Quaternion(0.367117, 0.0218498, 0.0936669, 0.925189)
bones/33/position = Vector3(-2.59379e-06, 3.89197, -8.97123e-07)
bones/33/rotation = Quaternion(0.207731, 1.02037e-06, 0.0196584, 0.977988)
bones/34/rotation = Quaternion(0.15059, 0.00159962, -0.000982455, 0.988595)
bones/35/rotation = Quaternion(0.367118, 0.0218514, 0.0936709, 0.925188)
bones/36/rotation = Quaternion(0.20773, 1.62126e-07, 0.0196544, 0.977989)
bones/37/rotation = Quaternion(0.104441, 6.04621e-08, 0.00988184, 0.994482)
bones/38/rotation = Quaternion(0.367118, 0.0218497, 0.093667, 0.925188)
bones/39/rotation = Quaternion(0.207729, 1.67507e-06, 0.0196622, 0.977989)
bones/40/position = Vector3(1.55658e-07, 3.30731, -5.19845e-06)
bones/40/rotation = Quaternion(0.104441, 2.36522e-07, 0.00988175, 0.994482)
bones/41/rotation = Quaternion(0.367118, 0.0218504, 0.0936685, 0.925188)
bones/42/position = Vector3(-8.1034e-07, 4.13664, 6.66459e-06)
bones/42/rotation = Quaternion(0.20773, 2.355e-06, 0.0196645, 0.977989)
bones/43/position = Vector3(-1.70063e-06, 2.59484, -2.79351e-06)
bones/43/rotation = Quaternion(0.104442, -1.10494e-06, 0.00987131, 0.994482)
bones/44/rotation = Quaternion(0.0564519, 0.288449, 0.955563, 0.0225889)
bones/44/scale = Vector3(1, 1, 1)
bones/45/rotation = Quaternion(-0.511908, 0.0664409, -0.0579429, 0.854505)
bones/46/rotation = Quaternion(0.620612, -0.0172738, -0.00873066, 0.783879)
bones/46/scale = Vector3(1, 1, 1)
bones/47/rotation = Quaternion(0.235113, -0.0312496, -0.0137272, 0.971369)
bones/48/rotation = Quaternion(-0.0746303, 0.144453, 0.983118, 0.0839232)
bones/48/scale = Vector3(1, 1, 1)
bones/49/rotation = Quaternion(-0.22984, 0.0661701, -0.0183852, 0.970802)
bones/50/rotation = Quaternion(0.642752, 0.016672, 0.014121, 0.765763)
bones/51/rotation = Quaternion(0.227804, 0.0319776, 0.015185, 0.973063)
bones/51/scale = Vector3(1, 1, 1)

[node name="EnemyBody" parent="Armature/Skeleton3D" index="0"]
blend_shapes/BigStomach = -0.04149

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="2"]
transform = Transform3D(0.998955, 0.0325971, -0.0320336, 0.0255683, 0.182353, 0.982901, 0.0378812, -0.982692, 0.181329, 2.71546, 19.1349, -152.965)
bone_name = "mixamorig_Head"
bone_idx = 5

[node name="Horn" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="0"]
transform = Transform3D(6.69752, 89.4077, 35.252, -44.467, 34.2103, -78.3174, -85.2003, -10.8265, 43.6459, 4.54641, 11.4587, 1.78621)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="Horn3" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="1"]
transform = Transform3D(58.3972, 53.3823, -29.9412, 54.5165, -26.5545, 58.9846, 27.8226, -60.0131, -52.7326, 3.35999, 6.14474, -1.74325)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="Horn4" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="2"]
transform = Transform3D(51.0109, -67.4046, 8.98939, -43.9049, -24.0645, 68.6992, -51.9284, -45.8674, -49.2537, -2.63094, 6.32724, -2.10808)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="Horn2" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="3"]
transform = Transform3D(14.0294, -72.0221, -12.8805, 45.8593, 18.8754, -55.5929, 57.0089, 2.54024, 47.8899, -5.07832, 11.3174, 2.21021)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="Horn5" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="4"]
transform = Transform3D(5.41408, 38.9601, 61.6931, 68.3342, -24.3955, 9.40917, 25.5804, 56.9229, -38.1925, 3.55317, 2.60548, 1.2674)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="Horn6" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="5"]
transform = Transform3D(30.4554, -42.5253, -64.6308, -73.9475, -36.4199, -10.8823, -22.7442, 61.4676, -51.1616, -3.52976, 3.0239, -0.0916406)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="3"]
transform = Transform3D(0.121989, 0.558093, -0.820762, -0.910691, -0.265881, -0.316146, -0.394665, 0.786027, 0.475816, 18.869, 0.880034, -140.487)
bone_name = "mixamorig_Arm.l"
bone_idx = 7

[node name="Horn5" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D2" index="0"]
transform = Transform3D(8.78392, 41.247, 58.9691, 52.6992, 36.7674, -33.5675, -49.0046, 46.9326, -25.5282, 1.23835, 23.3435, 0.825119)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="BoneAttachment3D4" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="4"]
transform = Transform3D(0.166253, -0.628831, 0.75956, 0.69002, -0.476083, -0.545176, 0.704438, 0.614749, 0.354755, -17.1979, 8.67737, -138.068)
bone_name = "mixamorig_Arm.r"
bone_idx = 26

[node name="Horn5" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D4" index="0"]
transform = Transform3D(-2.84669, -53.2282, -49.1374, -50.4184, 36.7661, -36.906, 52.0163, 32.7237, -38.4614, -0.737697, 23.3434, -0.586548)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="BoneAttachment3D3" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="5"]
transform = Transform3D(-0.994843, -0.0998119, 0.0180522, 0.0705173, -0.552668, 0.830413, -0.0729082, 0.827403, 0.556856, 17.9319, 15.4235, -57.1681)
bone_name = "mixamorig_Leg.l"
bone_idx = 45

[node name="Horn5" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D3" index="0"]
transform = Transform3D(-58.3079, -16.6274, 39.7434, -38.999, 48.7889, -36.8041, -18.3053, -50.9805, -48.1845, -1.21353, 12.0078, -3.75165)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="BoneAttachment3D5" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="6"]
transform = Transform3D(-0.977681, -0.0335752, -0.207397, -0.189374, -0.286664, 0.939128, -0.0909848, 0.957443, 0.273908, -7.92646, 5.9343, -51.0037)
bone_name = "mixamorig_Leg.r"
bone_idx = 49

[node name="Horn5" type="MeshInstance3D" parent="Armature/Skeleton3D/BoneAttachment3D5" index="0"]
transform = Transform3D(-34.8825, -16.6274, -61.3398, 39.8465, 48.7889, -35.8849, 49.5104, -50.9805, -14.3363, 0.735142, 11.9501, -2.80518)
mesh = ExtResource("3_uikw6")
skeleton = NodePath("../../../..")

[node name="AnimationTree" type="AnimationTree" parent="." index="1"]
tree_root = SubResource("AnimationNodeStateMachine_3w3dv")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/IsDead = false
parameters/BlendTree/Attack/active = false
parameters/BlendTree/Attack/internal_active = false
parameters/BlendTree/Attack/request = 0
parameters/BlendTree/Attack2/active = false
parameters/BlendTree/Attack2/internal_active = false
parameters/BlendTree/Attack2/request = 0
parameters/BlendTree/GetHit/active = false
parameters/BlendTree/GetHit/internal_active = false
parameters/BlendTree/GetHit/request = 0
parameters/BlendTree/Running/blend_amount = 0.0
parameters/BlendTree/TimeScale/scale = 1.0
script = ExtResource("4_4prx6")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="2"]
libraries = {
"Enemy": SubResource("AnimationLibrary_ape8k")
}
